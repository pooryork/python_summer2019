\documentclass[bachelor, och, pract, times]{SCWorks}
% параметр - тип обучения - одно из значений:
%    spec     - специальность
%    bachelor - бакалавриат (по умолчанию)
%    master   - магистратура
% параметр - форма обучения - одно из значений:
%    och   - очное (по умолчанию)
%    zaoch - заочное
% параметр - тип работы - одно из значений:
%    referat    - реферат
%    coursework - курсовая работа (по умолчанию)
%    diploma    - дипломная работа
%    pract      - отчет по практике
%    nir      - отчет о научно-исследовательской работе
%    autoref    - автореферат выпускной работы
%    assignment - задание на выпускную квалификационную работу
%    review     - отзыв руководителя
%    critique   - рецензия на выпускную работу
% параметр - включение шрифта
%    times    - включение шрифта Times New Roman (если установлен)
%               по умолчанию выключен
\usepackage[T2A]{fontenc}
\usepackage[cp1251]{inputenc}
\usepackage{graphicx}

\usepackage[sort,compress]{cite}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{fancyvrb}
\usepackage{longtable}
\usepackage{array}
\usepackage{verbatim}
\usepackage[english,russian]{babel}


\usepackage[colorlinks=true]{hyperref}


\newcommand{\eqdef}{\stackrel {\rm def}{=}}

\newtheorem{lem}{Лемма}

\begin{document}

% Кафедра (в родительном падеже)
\chair{информатики и программирования}

% Тема работы
\title{Работа с данными в Python}

% Курс
\course{2}

% Группа
\group{242}

% Факультет (в родительном падеже) (по умолчанию "факультета КНиИТ")
%\department{факультета компьютерных наук и информационных технологий}

% Специальность/направление код - наименование

\napravlenie{02.03.03 "--- Математическое обеспечение и администрирование информационных систем}


% Для студентки. Для работы студента следующая команда не нужна.
%\studenttitle{Студентки}

% Фамилия, имя, отчество в родительном падеже
\author{Бурдавицына Артёма Андреевича}

% Заведующий кафедрой
\chtitle{к.\,ф.-м.\,н.} % степень, звание
\chname{М.\,В.\,Огнева}

%Научный руководитель 
\satitle{} %должность, степень, звание
\saname{А.\,А.\,Казачкова}

%Если научный руководитель Грецова А.П., то раскомментируйте это и закомментируйте то(или удалите).
%\satitle{старший преподаватель} %должность, степень, звание
%saname{А.\,П.\,Грецова}

% Семестр 
\term{4(5)}

% Наименование практики 
\practtype{учебная}

% Продолжительность практики (количество недель) 
\duration{2}

% Даты начала и окончания практики 
\practStart{24.06.2018}
\practFinish{05.07.2018}

% Год выполнения отчета
\date{2018}

\maketitle

% Включение нумерации рисунков, формул и таблиц по разделам
% (по умолчанию - нумерация сквозная)
% (допускается оба вида нумерации)
\secNumbering


\tableofcontents




% Раздел "Введение"
\intro

Python - высокоуровневый скриптовый объектно-ориентированный язык программирования, разработанный Гвидо ван Россумом и Python Software Foundation в 1991 году. Его отличительной особенностью является интуитивный синтаксис и быстродействие.


Главной целью учебной практики является изучение синтаксиса Python и математических библиотек Numpy и Pandas.


Основные задачи практики:
\begin{itemize}
    \item изучение синтаксиса и основных конструкций языка Python;
    \item изучение методов и возможностей библиотек NumPy, Pandas, Matplotlib.
    \item применение полученных знаний для решения поставленных задач, а также для самостоятельной обработки и анализа набора данных из открытых источников.
\end{itemize}

\section{История языка Python}

История языка программирования Python началась в конце 1980-х. Гвидо ван Россум задумал Python в 1980-х годах, а приступил к его созданию в декабре 1989 года в центре математики и информатики в Нидерландах. Язык Python был задуман как потомок языка программирования ABC, способный к обработке исключений и взаимодействию с операционной системой Амёба. Ван Россум является основным автором Python и по сей день продолжает выполнять центральную роль в принятии решений относительно развития языка.

Версия Python 2.0 была выпущена 16 октября 2000 года и включала в себя много новых крупных функций — таких как полный сборщик мусора и поддержка Unicode. Однако наиболее важным из всех изменений было изменение самого процесса развития языка и переход на более прозрачный процесс его создания.
Первая обратно-несовместимая версия Python 3.0 была выпущена 3 декабря 2008 года после длительного периода тестирования. Многие её функции были портированы в обратно совместимые Python 2.6 и Python 2.7.

Python поддерживает несколько парадигм программирования: структурное, объектноориентированное, функциональное, императивное, аспектно-ориентированное. Основные архитектурные черты — динамическая типизация, автоматическое управление памятью, полная интроспекция, механизм обработки исключений, поддержка многопоточных вычислений и удобные высокоуровневые структуры данных. Код в Python организовывается в функции и классы, которые могут объединяться в модули (они в свою очередь могут быть объединены в пакеты).

Python даёт возможность писать компактные и читабельные программы. Программы, написанные на Python отличаются большей краткостью чем эквиваленты на C, C++ или Java, по нескольким причинам:

\begin{itemize}
    \item высокоуровневые типы данных позволяют вам выражать сложные операции в одной инструкции;
    \item группировка инструкций выполняется отступами, а не операторными скобками;
    \item нет необходимости в описании переменных или аргументов.
\end{itemize}


\section{Основы синтаксиса Python}

\subsection{Общие сведения}

Python - интерпретируемый объектно - ориентированный язык программирования. Его основным достоинством является нативный синтаксис и малое количество служебных слов. К основам Python можно отнести работу с условными операторами, циклами и функциями.

Основы синтаксиса Python:
\begin{itemize}
    \item не требуется точка с запятой в конце строки;
    \item группировка отступов выполняется посредством отступов;
    \item не обязательно описывать типы переменных.
\end{itemize}

\subsection{Условный оператор if-else}

Условный операторы служат для определения поведения программы в зависимости от некоторых условий. Данный оператор является основным элементом выбора в языке Python.

Задача 1

Дана точка на плоскости с координатами (х, у). Составить программу, которая выдает одно из сообщений «Да», «Нет», «На границе» в зависимости от того, лежит ли точка внутри заштрихованной области, вне заштрихованной области или на ее границе. Области задаются графически следующим образом:

\begin{figure}[!ht]
    \centering
    \includegraphics{2-1-24.png}
    \caption{Рисунок 1}\label{fig:task1}
\end{figure}

В данном фрагменте задачи есть 2 условия. Если координаты точки удовлетворяют всем неравенствам, то точка находится внутри. Это описывается в if-части условного оператора. В elif-части условного оператора описываются условия принадлежности точки к пространству вне заштрихованной области. Если координаты точки удовлетворяют этому условию, то точка не принадлежит заштрихованной области. В противном случае, при невыполнении ни одного
из условий получается, что точка лежит на границе. Это описоно в else-части.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 if (y<-x-1) and (x>-1) and (y>-1):
     print("Да");
 elif not((y<=-x-1) and (x>=-1) and (y>=-1)):
     print("Нет");
 else:
     print('На границе');
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:ifelse}.

\subsection{Циклы}

В языке Python существуют 3 вида циклов: цикл с параметром (for), цикл с предусловием (while), цикл с постусловием (do while).

\subsubsection{Цикл с парметром (for)}

В цикле for указывается переменная и множество значений, по которому будет пробегать переменная. Множество значений может быть задано списком, кортежем, строкой или диапазоном. Как правило, циклы for используются либо для повторения какой-либо последовательности действий заданное число раз, либо для изменения значения переменной в цикле от некоторого начального значения до некоторого конечного. Для повторения цикла некоторое заданное число раз n можно использовать цикл for вместе с функцией range.

\subsubsection{Цикл с предусловием (while)}

Цикл while исполняется пока по логическое выражение в скобках (условие будет истинным). Этим данный оператор похож на оператор if, исполняемый много раз. Цикл завершает свою работу только тогда, когда логическое выражение в заголовке возвращает ложь, то есть условие выполнения цикла больше не соблюдается. После этого поток выполнения перемещается к выражениям, расположенным ниже всего цикла. 

Задача 2

Даны два отрезка А и B (A>B). Не используя операции умножения и деления, определить, сколько отрезков В уместится в отрезке А.

Для решения задачи будем умножать чисто B на счетчик, являющийся натуральным числом. Если на данной итерации цикла число A всё еще больше числа B, то увеличиваем счетчик на единицу.
Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 while (a>s*b):
      s+=1;
  
  if (s*b > a):
      s-=1;
 
 print(s);
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:while}.

\subsection{Функции}

По своей сути функции в Python практически ничем не отличаются от функций из других языков программирования. Функцией называют именованный фрагмент программного кода, к которому можно обратиться из другого места вашей программы. Функции создаются для работы с данными, которые передаются ей в качестве аргументов, также функция может формировать некоторое возвращаемое значение. Для создания функции используется ключевое слово def, после которого указывается имя и список аргументов в круглых скобках. Тело функции выделяется также как тело условия (или цикла): четырьмя пробелами.

Задача 3

Разработать функцию, которая по заданному n возвращает список n первых членов заданной последовательности:
b1 = 2.3, b2 = -5, bn = bn - 2 + 2bn - 1.

Разработаем соответствующую функцию. Зададим начальные значения и положим их в возвращаемый список. В цикле for посчитаем по рекуррентной формуле и запишем в список следующие (n-2) члена заданной последовательности.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 def f(n):
     a = list();
 
     a.append(2.3);
     a.append(-5);
     b1 = 2.3;
     b2 = -5;
 
     for i in range(2,n):
         ans = b1 + 2*b2;
         a.append(ans);
         b1 = b2;
         b2 = ans;
 
     return a;
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:functions}.

\section{Структуры данных в Python}

\subsection{Строки}

Существует несколько литералов строк. Строки в апострофах и в кавычках - одно и то же. Причина наличия двух вариантов в том, чтобы позволить вставлять в литералы строк символы кавычек или апострофов, не используя экранирование. 
Пример:

\begin{Verbatim}[fontsize=\small]
.....
 S = 'spam"s'
 S = "spam's";
.....
\end{Verbatim}

	Существуют строки в тройных апострофах или кавычках. Главное достоинство строк в тройных кавычках в том, что их можно использовать для записи многострочных блоков текста. Внутри такой строки возможно присутствие кавычек и апострофов, главное, чтобы не было трех кавычек подряд. 
Пример:

\begin{Verbatim}[fontsize=\small]
.....
 >>> c = '''это очень большая
 ... строка, многострочный
 ... блок текста'''
 >>> c
 'это очень большая\nстрока, многострочный\nблок текста'
 >>> print(c)
 это очень большая 
 строка, многострочный
           блок текста
.....
\end{Verbatim}

Основные операции для работы со строками представлены в таблице.

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
   
    \verb"+" & \verb"Конкатенация (сложение строк)"\cr\hline
    \verb"*" & \verb"Умножение строки на число"\cr\hline
    \verb"[]" & \verb"Получение элемента по индексу"\cr\hline
    \verb"[x:y:h]" & \verb"Срез, где"\cr
    \verb"" & \verb"x - номер элемента, с которого"\cr
    \verb"" & \verb"начинается срез,"\cr
    \verb"" & \verb"y - номер первого элемента, не"\cr
    \verb"" & \verb" вошедшего в срез,"\cr
    \verb"" & \verb"h - шаг среза"\cr\hline
    \verb"len()" & \verb"Длина строки"\cr\hline
    \verb"find(подстрока, [начало]," & \verb"Возвращает индекс первого"\cr
    \verb"[конец])" & \verb"вхождения или -1."\cr\hline
    \verb"rfind()" & \verb"Возвращает индекс последнего"\cr
    \verb"" & \verb"вхождения или -1."\cr\hline
    \verb"startswith(шаблон)" & \verb"Начинается ли строка s с"\cr
    \verb"" & \verb"указанного шаблона;"\cr\hline
    \verb"endswith(шаблон)" & \verb"Заканчивается ли строка"\cr
    \verb"" & \verb"шаблоном;"\cr\hline
    \verb"replace(шаблон, замена)" & \verb"Замена шаблона"\cr\hline
    \verb"split(разделитель)" & \verb"Разбиение строки по"\cr
    \verb"" & \verb"разделителю"\cr\hline
    \verb"join()" & \verb"Обратная операция split()"\cr\hline
    \verb"isapha()" & \verb"Состоит ли строка из букв"\cr\hline
    \verb"isalnum()" & \verb"Состоит ли строка из цифр"\cr
    \verb"" & \verb" и букв"\cr\hline
    \verb"islower()" & \verb"Состоит ли строка из букв в"\cr
    \verb"" & \verb"нижнем регистре"\cr\hline
    \verb"isupper()" & \verb"Состоит ли строка из букв в"\cr
    \verb"" & \verb" верхнем регистре"\cr\hline
    \verb"isspace()" & \verb"Состоит ли строка из"\cr
    \verb"" & \verb"пробельных символов"\cr\hline
    \verb"istitle()" & \verb"Начинаются ли слова в строке"\cr
    \verb"" & \verb"с заглавной буквы."\cr\hline
    \verb"count(шаблон, [начало]," & \verb"Подсчет непересекающихся"\cr
    \verb"[конец])" & \verb"вхождений шаблона в строку"\cr\hline
    
    \end{tabular}
\end{table}

Задача 4

Удалить из строки слова, содержащие повторяющиеся символы

Решение задачи:

Введем строку. Удалим лишние символы, оставив только буквы и пробельные символы. Для этого воспользуемся функциями split и join. Split разобъет функцию согласно уловному выражению в скобках (x for x in str if x.isalpha() or x == ' '), оставив только пробельные символы и буквы. Join соединит слова в одну строку.

\begin{Verbatim}[fontsize=\small]
.....
 words = ''.join(x for x in str if x.isalpha() or x == ' ').split();
.....
\end{Verbatim}

В цикле Приведем все символы к нижнему регистру с помощью функции lower(). Поломим их в set. Для каждого элемета сета будем проверять заданное условием задачи условие.

\begin{Verbatim}[fontsize=\small]
.....
 for sub_str in words[:]:
 
     sub_set = set(sub_str.lower());
 
     if not(len(sub_set) == len(sub_str)):
         words.remove(sub_str);
 
 words1 = ''.join(words);
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:string}.

\subsection{Списки}

Список – это структура данных для хранения объектов различных типов. писок очень похож на массив, только, в нем можно хранить объекты различных типов. Размер списка не статичен, его можно изменять. Список по своей природе является изменяемым типом данных. Переменная, определяемая как список, содержит ссылку на структуру в памяти, которая в свою очередь хранит ссылки на какие-либо другие объекты или структуры.

Задача 5

Дан одномерный массив чисел. После максимального из четных элементов вставить 0.Дан одномерный массив чисел. Найти/определить максимальный из элементов, имеющих четный индекс.

Решение задачи:

Запишем все числа в список. С помощью функции max и среза, оставляющего только элемента с чётным индексом (нумерация элементов массива с 0) выведем максимальный из элементов, имеющих четный индекс.

\begin{Verbatim}[fontsize=\small]
.....
 a = list(map(int, input('Введите числа: ').split()));
 
 print(max(a[::2]));
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:list}.

\section{Библиотека Random}
Модуль random предоставляет функции для генерации случайных чисел, букв, случайного выбора элементов последовательности. Описание функций этого модуля на русском языке можно посмотреть вот здесь. Рассмотрим некоторые из них.

\begin{itemize}
    \item random.randrange(start, stop, step) - возвращает случайно выбранное число из последовательности
    \item random.randint(A, B) - случайное целое число N, A ? N ? B
    \item random.choice(sequence) - случайный элемент непустой последовательности.
    \item random.shuffle(sequence, [rand]) - перемешивает последовательность, изменяя ее, поэтому эта функция не работает для строк и кортежей
    \item random.sample(population, k) - список длиной k из последовательности population
    \item random.random() - случайное число от 0 до 1
    \item random.uniform(A, B) - случайное число с плавающей точкой, A < N < B (или B < N < A).
    \item random.triangular(low, high, mode) - случайное число с плавающей точкой, low < N < high. Mode - распределение.
\end{itemize}

Задача 6

id - случайное пятизначное число
логин - случайная последовательность из 6 маленьких английских букв
пароль - случайная последовательность 10 неповторяющихся больших и маленьких английских букв и цифр
Создайте функцию генерации id, функцию генерации логина и функцию генерации пароля. С использованием этих трёх функций напишите функцию генерации списка из N троек вида (id, логин, пароль), id, логины и пароли в тройках не должны повторяться. При этом (гласными считаем: aeiou):
Предпоследняя цифра id равна 2. В логине не больше 2 гласных букв. Пароль не должен заканчиваться цифрой, но хотя бы одна цифра в нём должна присутствовать.

Создадим функции, генерирующие  id, логин и пароль.

id - пятизначное число, оканчивающееся цифрой 2. Для этого с помощью функции random.randint(10000, 99999) сгенерируем число в диапазоне от 10000 до 99999, т.е любое пятизначное. Будем генерировать это число до тех пор, пока оно не будет оканчиваться на цифру 2.

\begin{Verbatim}[fontsize=\small]
.....
 def idGen():
     id =0;
     while (id % 10 != 2):
         id = random.randint(10000, 99999)
 
     return id;
.....
\end{Verbatim}

Логин - случайная последовательность из 6 маленьких английских букв, содержащая не более 2х гласных букв. Для этого генерируем 6 случайных букв. При каждой итерации проверяем количество гласных и если оно превышает максимальное, то генерируем букву до тех пока, пока она не будет согласной.

\begin{Verbatim}[fontsize=\small]
.....
 def loginGen():
     login = '';
     alphabet = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm'];
     vowels = ['a', 'e', 'i', 'o', 'u'];
     volwesCount = 0;
 
     for i in range (6):
         letter = random.choice(alphabet);
 
         if (not(letter in vowels) or volwesCount < 2):
             login+=letter;
             if (letter in vowels):
                 volwesCount+=1;
         else:
             while (letter in vowels):
                 letter = random.choice(alphabet);
             login+=letter;
 
     return login;
.....
\end{Verbatim}

Пароль - случайная последовательность 10 неповторяющихся больших и маленьких английских букв и цифр. Пароль не должен заканчиваться цифрой, но хотя бы одна цифра в нём должна присутствовать. Для этого генерируем случайную цифру от 0 до 9 и ее место в пароле - от 0 до 8, т.к она не может быть последней согласно условию. В цикле генерируем 9 случайных букв, генерируем, будет она заглавной или строчной. Проверяем, является ли данное место местом цифры. Если является, то вставляем заранее сгенерированную цифру, иначе - букву.

\begin{Verbatim}[fontsize=\small]
.....
 def passGen():
     password = '';
     alphabet = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm'];
     characters = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
     digits = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
     digit = random.choice(digits);
     digitPlace = random.randint(0,8);
 
     for i in range (10):
 
         if (i != digitPlace):
             letter = random.choice(alphabet);
             ifLower = random.randint(0,1);
             if (ifLower == 0):
                 password += letter.upper();
             else:
                 password += letter;
 
         else:
             password+=digit;
 
     return password;
.....
\end{Verbatim}

Создадим функцию generate, возвращающую список из необходимого количества уникальных связок id-логин-пароль.

\begin{Verbatim}[fontsize=\small]
.....
 def generate(n):
     a = list();
 
     for i in range(n):
         a1 = list();
         a1.append(idGen());
         a1.append(loginGen());
         a1.append(passGen());
 
         if (isUnique(a, a1)):
             a.append(a1);
 
     return a;
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:random}.


\section{Библиотека NumPy}

NumPy — это библиотека языка Python, добавляющая поддержку больших многомерных массивов и матриц, вместе с большой библиотекой высокоуровневых (и очень быстрых) математических функций. Python библиотека Numpy незаменима для работы с числовыми массивами, векторами и матрицами, а также позволяет строить графики.

\textsc{Задача 6} 
Написать программу, реализующую алгоритм из индивидуального задания с использованием list, замерить время выполнения и сравнить с готовой реализацией алгоритма из библиотеки NumPy 10х10, 100х100, 500х500
24. Создать единичную матрицу. 

Решение задачи:

Используем библиотеку time для замеров времени работы матриц и экземпляров библиотеки NumPy. 

Произведем замеры для матрицы 10х10. В библиотеке NumPy существует специальная функция для создания единичной матрицы - np.eye(n), где n - размерность матрицы. 

\begin{Verbatim}[fontsize=\small]
.....
 time1 = time.time();
 a1 = np.eye(n);
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by NumPY');
.....
\end{Verbatim}

Для матрицы типа list используем вложенный цикл. Если координаты равны, то в матрице ставится 1, иначе - 0.

\begin{Verbatim}[fontsize=\small]
.....
 time1 = time.time();
 
 a = list();
 for i in range(n):
     a2 = list();
     for j in range(n):
         if (i == j):
             a2.append(1);
         else:
             a2.append(0);
     a.append(a2);
 
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by list');
.....
\end{Verbatim}

Аналогично для матриц размерности 100х100 и 500х500.

Полный код программы приведен в приложении~\ref{pril:numpy}.

\section{Библиотека MATHPLOTLIB}

Библиотека matplotlib - это бибилиотека двумерной графики для языка программирования Python, с помощью которой можно создавать высококачественные рисунки различных форматов. Matplotlib представляет собой модуль-пакет для Python.

Главной единицей при работе с matplotlib является рисунок (Figure). Любой рисунок в matplotlib имеет вложенную структуру. 

Рисунок является объектом самого верхнего уровня, на котором располагаются одна или несколько областей рисования (Axes), элементы рисунка Artisits (заголовки, легенда и т.д.) и основа-холст (Canvas). На рисунке может быть несколько областей рисования Axes, но данная область рисования Axes может принадлежать только одному рисунку Figure.

Область рисования является объектом среднего уровня, который является главным объектом работы с графикой matplotlib в объектно-ориентированном стиле. Это то, что ассоциируется со словом "plot", это часть изображения с пространством данных. Каждая область рисования Axes содержит две (или три в случае трёхмерных данных) координатных оси (Axis объектов), которые упорядочивают отображение данных.

Координатная ось являются объектом среднего уровня, которые определяют область изменения данных, на них наносятся деления ticks и подписи к делениям ticklabels. Расположение делений определяется объектом Locator, а подписи делений обрабатывает объект Formatter. Конфигурация координатных осей заключается в комбинировании различных свойств объектов Locator и Formatter.

Элементы рисунка Artists являются как бы красной линией для всех иерархических уровней. Практически всё, что отображается на рисунке является элементом рисунка (Artist), даже объекты Figure, Axes и Axis. Элементы рисунка Artists включают в себя такие простые объекты как текст (Text), плоская линия (Line2D), фигура (Patch) и другие.
Когда происходит отображение рисунка (figure rendering), все элементы рисунка Artists наносятся на основу-холст (Canvas). Большая часть из них связывается с областью рисования Axes. Также элемент рисунка не может совместно использоваться несколькими областями Axes или быть перемещён с одной на другую.

\textsc{Задача 7} 
Постройте несколько функций на одном графике различными цветами. Для построенного графика сделайте сетку и легенду.

Решение задачи:

Построим 3 графика различных функций.  Зададим диапазон значений x с помощью функции np.linspace. Задаем выражение функции через переменную y. Построим график этой функции, задав цвет линии и подпись для легенды

\begin{Verbatim}[fontsize=\small]
.....
 x = np.linspace(-2 * np.pi, 2 * np.pi)
 
 y =  1/2*np.cos(2*x+1)
 
 plt.plot(x, y, color='#000000', label = '0.5cos(2x+1)')
.....
\end{Verbatim}

Аналогично для двух других графиков функций. Для вовода на экран графика, сетки и легенды выполним следующие команды:

\begin{Verbatim}[fontsize=\small]
.....
 plt.legend()
 plt.grid()
 plt.show()
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:plot}.

\section{Библиотека Pandas}

Pandas это высокоуровневая Python библиотека для анализа данных. Высокоуровневая, потому что построена она поверх более низкоуровневой
библиотеки NumPy, что является большим плюсом в производительности. Pandas является наиболее продвинутой и быстроразвивающейся библиотекой для обработки и анализа данных.

\textsc{Задача 8} 
Создать 2 файла .csv с товарами: номер склада, наименование товара, количество, вес, хрупкость(да/нет), требуется хранить в холодильнике(да/нет), страна производитель. В первом файле товары одного склада, во втором другого. Объединить данные из этих файлов в один DateFrame.
24.Найти процент товаров количеством < 10 среди товаров из Германии.

Решение задачи:

Создадим 2 файла и объединим их в один.

\begin{Verbatim}[fontsize=\small]
.....
 df1 = pd.read_csv('input1.csv', delimiter=',')
 df2 = pd.read_csv('input2.csv', delimiter=',')
 
 df1 = df1.append(df2)
.....
\end{Verbatim}

Подсчитаем и выведем необходимое число

\begin{Verbatim}[fontsize=\small]
.....
 print(df1[(df1['number'] < 10) & (df1['country'] == 'Germany')].shape[0] / df1[df1['country'] == 'Germany'].shape[0])
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:pandas}.

\section{Финальная задача}

Найти готовый файл с данными.

Для выполнения задания был взят файл с данными о футбольных матчах между национальными сборными с 2018 года по настоящее время

\begin{Verbatim}[fontsize=\small]
.....
 sys.stdout = open('output.txt', 'w')
 df = pd.read_csv('results.csv', delimiter=',')
.....
\end{Verbatim}

Посчитать статистические показатели:
- медиана,
- мода,
- средняя,
- минимум,

Сделаем это с помощью стандартных функций бибилотеки по полям homescore и awayscore

\begin{Verbatim}[fontsize=\small]
.....
 #2
 print('Median score:')
 print(df[['home_score', 'away_score']].median())
 print()
 
 print('Mode score:')
 print(df[['home_score', 'away_score']].mode())
 print()
 
 print('Average score:')
 print(df[['home_score', 'away_score']].mean())
 print()
 
 print('Min score:')
 print(df[['home_score', 'away_score']].min())
 print()
 
 print('Max score:')
 print(df[['home_score', 'away_score']].max())
 print()
.....
\end{Verbatim}

Разбить данные на несколько блоков (не менее 3, приблизительно равных по размеру) по некоторому критерию (критерий определить самостоятельно).

Разобъем данные на 3 части: домашние и гостевые матчи сборных России, Англии и Германии.

\begin{Verbatim}[fontsize=\small]
.....
 #3
 df_rus = df.query("home_team == 'Russia' or away_team == 'Russia'")
 df_rus.to_csv('Russia.csv')
 df_eng = df.query("home_team == 'England' or away_team == 'England'")
 df_eng.to_csv('England.csv')
 df_ger = df.query("home_team == 'Germany' or away_team == 'Germany'")
 df_ger.to_csv('Germany.csv')
.....
\end{Verbatim}

Привести круговую диаграмму для проделанного разбиения.

\begin{Verbatim}[fontsize=\small]
.....
 #4
 data = [df_rus.shape[0], df_eng.shape[0], df_ger.shape[0]]
 labels = ["Matches with Russia", "Matches with England", "Matches with Germany"]
 
 #5
 pylab.pie(data, labels=labels)
 plt.savefig('pic1.png')
 pylab.show()
.....
\end{Verbatim}

\begin{figure}[!ht]
    \centering
    \includegraphics{pic1.png}
    \caption{Круговая диаграмма разбиения - pic1.png.}\label{fig:pic1}
\end{figure}

В зависимости от особенностей набора данных для каждого блока
построить график (гистограмму, ...).

Для матчей сборной России построим гистограмму по городам, в которых были сыграны матчи. Цифры будут означать количество матчей в определенном городе.

\begin{Verbatim}[fontsize=\small]
.....
 #6
 plt.hist(df_rus["city"])
 plt.savefig('pic2.png')
 plt.show()
.....
\end{Verbatim}

\begin{figure}[!ht]
    \centering
    \includegraphics[scale=0.5]{pic2.png}
    \caption{Разбиение городов, в которых проводились матчи сборной России - pic2.png.}\label{fig:pic2}
\end{figure}

Для матчей сборной Англии подсчитаем количество раз, в который команда забила на выезде то или оное количество мячей.

\begin{Verbatim}[fontsize=\small]
.....
 plt.hist(df_eng['away_score'])
 plt.savefig('pic3.png')
 plt.show()
.....
\end{Verbatim}

\begin{figure}[!ht]
    \centering
    \includegraphics{pic3.png}
    \caption{Количество мячей и количество раз, сколько из забила сборная Англии на выезде - pic3.png.}\label{fig:pic3}
\end{figure}

Для матчей сборной Германии определим, в каких города команда играла в том или ином турнире

\begin{Verbatim}[fontsize=\small]
.....
 plt.plot(df_ger['city'], df_ger['tournament'])
 plt.savefig('pic4.png')
 plt.show()
.....
\end{Verbatim}

\begin{figure}[!ht]
    \centering
    \includegraphics[scale=0.4]{pic4.png}
    \caption{Города, в которых сборная Германия играла в разных турнирах - pic4.png.}\label{fig:pic4}
\end{figure}

Сгруппировать данные (GroupBy) по некоторому признаку и сохранить результаты в новые таблицы. Для каждой новой таблицы провести сортировку по сложному ключу, состоящему из нескольких признаков. Для каждой таблицы своя сортировка.

Сгруппируем изначальные данные по городу, в котором проводился матч и забитым/пропущенным мячам командами, игравшими дома/на выезде.

\begin{Verbatim}[fontsize=\small]
.....
 dfgroup = df.groupby('city')[['home_score', 'away_score']].sum()
 dfgroup.to_csv('city_groupby.csv')
.....
\end{Verbatim}

Полный код программы приведен в приложении~\ref{pril:final}.

% Раздел "Заключение"
\conclusion


В ходе практики был изучен синтаксис, базовые конструкции и структуры языка Python. В частности, были изучены  методы и возможности популярных библиотек Numpy, Pandas, Matplotlib. Применение этих библиотек существенно упростило и ускорило процесс решения задач, из чего следует необходимость использования расширения языка Python.

% Список литературы
\bibliographystyle{gost780uv}
\bibliography{thesis}

% Окончание основного документа и начало приложений
% Каждая последующая секция документа будет являться приложением
\appendix

\section{Вектор}\label{pril:ifelse}

\textsc{Задача 1} Дана точка на плоскости с координатами (х, у). Составить программу, которая выдает одно из сообщений «Да», «Нет», «На границе» в зависимости от того, лежит ли точка внутри заштрихованной области, вне заштрихованной области или на ее границе. Области задаются графически следующим образом:

\begin{figure}[!ht]
    \centering
    \includegraphics{2-1-24.png}
    \caption{Рисунок 1}\label{fig:task1}
\end{figure}

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 x = float(input('x = '));
 y = float(input('y = '));
 
 #y=-x-1 and x<=0 and y<=0
 #x=-1 and y>=0 and y<=-1
 #y=-1 and x>=0 and x<=-1
 
 if (y<-x-1) and (x>-1) and (y>-1):
     print("Да");
 elif not((y<=-x-1) and (x>=-1) and (y>=-1)):
     print("Нет");
 else:
     print('На границе');
 
.....
\end{Verbatim}

Пример:

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
    Вход & Выход\cr\hline
   
    \verb"1 2" & \verb"Нет"\cr\hline
    \verb"-0.5 -0.5" & \verb"На границе"\cr\hline
    \verb"-0.75 -0.75" & \verb"Да"\cr\hline
    
    \end{tabular}
\end{table}

\section{Циклы}\label{pril:while}

\textsc{Задача 2} Даны два отрезка А и B (A>B). Не используя операции умножения и деления, определить, сколько отрезков В уместится в отрезке А.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 a = float(input('a = '));
 b = float(input('b = '));
 
 s = 0.0;
 
 while (a>s*b):
     s+=1;
 
 if (s*b > a):
     s-=1;
 
 print(s);
 
.....
\end{Verbatim}

Пример:

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
    Вход & Выход\cr\hline
   
    \verb"2 1" & \verb"1"\cr\hline
    \verb"15 5" & \verb"3"\cr\hline
    \verb"30 20" & \verb"1"\cr\hline
    
    \end{tabular}
\end{table}

\section{Функции}\label{pril:functions}

\textsc{Задача 3} Разработать функцию, которая по заданному n возвращает список n первых членов заданной последовательности:
b1 = 2.3, b2 = -5, bn = bn - 2 + 2bn - 1.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 a = float(input('a = '));
 b = float(input('b = '));
 
 s = 0.0;
 
 while (a>s*b):
     s+=1;
 
 if (s*b > a):
     s-=1;
 
 print(s);
 
.....
\end{Verbatim}

Пример:

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
    Вход & Выход\cr\hline
   
    \verb"4" & \verb"[2.3, -5, -7.7, -20.4]"\cr\hline
    \verb"5" & \verb"[2.3, -5, -7.7, -20.4, -48.5]"\cr\hline
    \verb"2" & \verb"[2.3, -5]"\cr\hline
    
    \end{tabular}
\end{table}

\section{Строки}\label{pril:string}

\textsc{Задача 4} Удалить из строки слова, содержащие повторяющиеся символы.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 str = input('String: ');
 i=0;
 str_ans='';
 words = ''.join(x for x in str if x.isalpha() or x == ' ').split();
 
 
 for sub_str in words[:]:
 
     sub_set = set(sub_str.lower());
 
     if not(len(sub_set) == len(sub_str)):
         words.remove(sub_str);
 
 words1 = ' '.join(words);
 print(words1);
 
.....
\end{Verbatim}

Пример:

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
    Вход & Выход\cr\hline
   
    \verb"absAcaDa abc" & \verb"abc"\cr\hline
    \verb"amdkvndkn. dflkbvm, ekfsnv!" & \verb"dflkbvm ekfsnv"\cr\hline
    \verb"a" & \verb"a"\cr\hline
    
    \end{tabular}
\end{table}

\section{Списки}\label{pril:list}

\textsc{Задача 5} Дан одномерный массив чисел. Найти/определить максимальный из элементов, имеющих четный индекс.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 a = list(map(int, input('Введите числа: ').split()));
 
 print(max(a[::2]));
.....
\end{Verbatim}

Пример:

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
    Вход & Выход\cr\hline
   
    \verb"1 2 3 4" & \verb"3"\cr\hline
    \verb"-1 2 -3 4" & \verb"-1"\cr\hline
    \verb"0" & \verb"0"\cr\hline
    
    \end{tabular}
\end{table}

\section{Библиотека Random}\label{pril:random}

\textsc{Задача 5} 
id - случайное пятизначное число
логин - случайная последовательность из 6 маленьких английских букв
пароль - случайная последовательность 10 неповторяющихся больших и маленьких английских букв и цифр
Создайте функцию генерации id, функцию генерации логина и функцию генерации пароля. С использованием этих трёх функций напишите функцию генерации списка из N троек вида (id, логин, пароль), id, логины и пароли в тройках не должны повторяться. При этом (гласными считаем: aeiou):
Предпоследняя цифра id равна 2. В логине не больше 2 гласных букв. Пароль не должен заканчиваться цифрой, но хотя бы одна цифра в нём должна присутствовать.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 import random
 import string
 
 def idGen():
     id =0;
     while (id % 10 != 2):
         id = random.randint(10000, 99999)
 
     return id;
 
 def loginGen():
     login = '';
     alphabet = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm'];
     vowels = ['a', 'e', 'i', 'o', 'u'];
     volwesCount = 0;
 
     for i in range (6):
         letter = random.choice(alphabet);
 
         if (not(letter in vowels) or volwesCount < 2):
             login+=letter;
             if (letter in vowels):
                 volwesCount+=1;
         else:
             while (letter in vowels):
                 letter = random.choice(alphabet);
             login+=letter;
 
     return login;
 
 def passGen():
     password = '';
     alphabet = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm'];
     characters = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
     digits = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
     digit = random.choice(digits);
     digitPlace = random.randint(0,8);
 
     for i in range (10):
 
         if (i != digitPlace):
             letter = random.choice(alphabet);
             ifLower = random.randint(0,1);
             if (ifLower == 0):
                 password += letter.upper();
             else:
                 password += letter;
 
         else:
             password+=digit;
 
     return password;
 
 def isUnique(a, a1):
     for i in range(len(a)):
         if (a[i] == a):
             return False;
     return True;
 
 def generate(n):
     a = list();
 
     for i in range(n):
         a1 = list();
         a1.append(idGen());
         a1.append(loginGen());
         a1.append(passGen());
 
         if (isUnique(a, a1)):
             a.append(a1);
 
     return a;
 
 n = int(input('n = '));
 a = generate(n);
 
 for i in range (len(a)):
     print(a[i]);
 
.....
\end{Verbatim}

Пример:

\begin{table}[ht]
    \small
    \begin{tabular}{|p{15em}|p{15em}|}\hline
    Вход & Выход\cr\hline
   
    \verb"5" & \verb"[45082, 'vxcoen', 'JxG1FinVeX']"\cr
    \verb"" & \verb"[43492, 'fjekes', '9DpjqMkEcd']"\cr
    \verb"" & \verb"[35852, 'jadudn', 'ypnHrKPV4p']"\cr
    \verb"" & \verb"[69632, 'dlccmx', 'X9JjyUfMYf']"\cr
    \verb"" & \verb"[46802, 'zkmlhz', 'OXO4jSVqUS']"\cr\hline
    \verb"0" & \verb""\cr\hline
    \verb"-1" & \verb""\cr\hline
    
    \end{tabular}
\end{table}

\section{Библиотека NumPy}\label{pril:numpy}

\textsc{Задача 6} Написать программу, реализующую алгоритм из индивидуального задания с использованием list, замерить время выполнения и сравнить с готовой реализацией алгоритма из библиотеки NumPy 10х10, 100х100, 500х500
24. Создать единичную матрицу. 

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 import numpy as np
 import random
 import time
 
 #10x10
 n = 10;
 print('for', n,'elements:');
 
 time1 = time.time();
 
 a = list();
 for i in range(n):
     a2 = list();
     for j in range(n):
         if (i == j):
             a2.append(1);
         else:
             a2.append(0);
     a.append(a2);
 
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by list');
 
 time1 = time.time();
 a1 = np.eye(n);
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by NumPY');
 print('');
 
 #100x100
 n = 100;
 print('for',n,'elements:');
 
 time1 = time.time();
 
 a = list();
 for i in range(n):
     a2 = list();
     for j in range(n):
         if (i == j):
             a2.append(1);
         else:
             a2.append(0);
     a.append(a2);
 
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by list');
 
 time1 = time.time();
 a1 = np.eye(n);
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by NumPY');
 print('');
 
 #500x500
 n = 500;
 print('for',n,'elements:');
 
 time1 = time.time();
 
 a = list();
 for i in range(n):
     a2 = list();
     for j in range(n):
         if (i == j):
             a2.append(1);
         else:
             a2.append(0);
     a.append(a2);
 
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by list');
 
 time1 = time.time();
 a1 = np.eye(n);
 time2 = time.time();
 print ((time2 - time1)*1000, 'ms by NumPY');
 
.....
\end{Verbatim}

Пример:

\begin{figure}[!ht]
    \centering
    \includegraphics{numpy.png}
    \caption{Сравнение времени работы матриц и экземпляра библиотеки NumPy}\label{fig:numpy}
\end{figure}

\section{Библиотека MathplotLib}\label{pril:plot}

\textsc{Задача 7} Постройте несколько функций на одном графике различными цветами. Для построенного графика сделайте сетку и легенду.

Решение задачи:

\begin{Verbatim}[fontsize=\small]
.....
 import pandas as pd
 import numpy as np
 import matplotlib.pyplot as plt
 import math
 
 x = np.linspace(-2 * np.pi, 2 * np.pi)
 
 y =  1/2*np.cos(2*x+1)
 f = np.cos(2*x+1)*x;
 g = -1/5*np.sin(3*x-1)
 
 plt.plot(x, y, color='#000000', label = '0.5cos(2x+1)')
 
 plt.plot(x, f, color='#FF4500', label = 'xcos(2x+1)')
 
 plt.plot(x, g, color='#20B2AA',label = '-0.2sin(3x-1)')
 
 plt.legend()
 plt.grid()
 plt.show()
.....
\end{Verbatim}

Пример:

\begin{figure}[!ht]
    \centering
    \includegraphics{plot.png}
    \caption{Графики функций, легенда и сетка}\label{fig:numpy}
\end{figure}

\section{Библиотека Pandas} \label{pril:pandas}

\textsc{Задача 8} Создать 2 файла .csv с товарами: номер склада, наименование товара, количество, вес, хрупкость(да/нет), требуется хранить в холодильнике(да/нет), страна производитель. В первом файле товары одного склада, во втором другого. Объединить данные из этих файлов в один DateFrame.
24.Найти процент товаров количеством < 10 среди товаров из Германии.

Решение задачи

\begin{Verbatim}[fontsize=\small]
.....
 import pandas as pd
 import sys
 
 sys.stdout = open('output.txt', 'w')
 
 df1 = pd.read_csv('input1.csv', delimiter=',')
 df2 = pd.read_csv('input2.csv', delimiter=',')
 
 df1 = df1.append(df2)
 
 print(df1[(df1['number'] < 10) & (df1['country'] == 'Germany')].shape[0] / df1[df1['country'] == 'Germany'].shape[0])
.....
\end{Verbatim}

Пример:

input1.csv:
\begin{Verbatim}[fontsize=\small]
.....
 warehouse number,product,number,weight,fragility,in refrigerator,country
 1,glass,12,21,Yes,No,Germany
 1,phone,144,12,No,Yes,China
 1,plastic,2,99,No,No,Japan
 1,beer,5,4,Yes,No,Germany
 1,tank,15,294,No,No,Russia
 1,coffee,22,512,Yes,No,Indonesia 
.....
\end{Verbatim}

input2.csv:
\begin{Verbatim}[fontsize=\small]
.....
 warehouse number,product,number,weight,fragility,in refrigerator,country
 2,fur,52,13,Yes,No,Russia
 2,meat,1,56,No,No,Germany
 2,bread,2,41,No,No,Russia
 2,bread,45,12,Yes,No,USA
 2,oil,11,22,No,Yes,Italy
 2,juice,12,10,No,Yes,Germany 
.....
\end{Verbatim}

output.txt:
\begin{Verbatim}[fontsize=\small]
.....
 0.5
.....
\end{Verbatim}

\section{Финальная задача} \label{pril:final}

\begin{Verbatim}[fontsize=\small]
.....
 import pandas as pd
 import sys
 import matplotlib.pyplot as plt
 import pylab
 
 #1
 sys.stdout = open('output.txt', 'w')
 df = pd.read_csv('results.csv', delimiter=',')
 
 #2
 print('Median score:')
 print(df[['home_score', 'away_score']].median())
 print()
 
 print('Mode score:')
 print(df[['home_score', 'away_score']].mode())
 print()
 
 print('Average score:')
 print(df[['home_score', 'away_score']].mean())
 print()
 
 print('Min score:')
 print(df[['home_score', 'away_score']].min())
 print()
 
 print('Max score:')
 print(df[['home_score', 'away_score']].max())
 print()
 
 #3
 df_rus = df.query("home_team == 'Russia' or away_team == 'Russia'")
 df_rus.to_csv('Russia.csv')
 df_eng = df.query("home_team == 'England' or away_team == 'England'")
 df_eng.to_csv('England.csv')
 df_ger = df.query("home_team == 'Germany' or away_team == 'Germany'")
 df_ger.to_csv('Germany.csv')
 
 #4
 data = [df_rus.shape[0], df_eng.shape[0], df_ger.shape[0]]
 labels = ["Matches with Russia", "Matches with England", "Matches with Germany"]
 
 #5
 pylab.pie(data, labels=labels)
 plt.savefig('pic1.png')
 pylab.show()
 
 #6
 plt.hist(df_rus["city"])
 plt.savefig('pic2.png')
 plt.show()
 
 plt.hist(df_eng['away_score'])
 plt.savefig('pic3.png')
 plt.show()
 
 plt.plot(df_ger['city'], df_ger['tournament'])
 plt.savefig('pic4.png')
 plt.show()
 
 dfgroup = df.groupby('city')[['home_score', 'away_score']].sum()
 dfgroup.to_csv('city_groupby.csv')
.....
\end{Verbatim}

\end{document}
